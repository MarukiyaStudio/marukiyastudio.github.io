:root{font-family:Noto Sans JP,Inter,system-ui,sans-serif;line-height:1.6;font-weight:400;color:#e5e7eb;background-color:#111113;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*{box-sizing:border-box}body{margin:0;min-width:320px;min-height:100vh;background:radial-gradient(circle at top,#1f1f23,#141416,#0f0f11)}button{font-family:inherit;cursor:pointer}#root{max-width:none;margin:0;padding:0;min-height:100vh}.app-shell{display:grid;grid-template-columns:auto 1fr;gap:0;align-items:stretch;min-height:100vh}.main-content{display:flex;flex-direction:column;gap:2rem;padding:2.5rem 2.5rem 4rem}.counter-group{display:flex;gap:1rem;flex-wrap:wrap}.eyebrow{font-size:.85rem;text-transform:uppercase;letter-spacing:.2em;color:#4b5563;margin:0 0 .5rem}h1{margin:0;font-size:clamp(2rem,4vw,3rem);color:#111827}.subtitle{margin:.75rem 0 0;color:#374151;max-width:640px}.counter{background:#111827;color:#f9fafb;padding:1.5rem 1.75rem;border-radius:16px;min-width:140px;display:flex;flex-direction:column;gap:.35rem;text-align:right;box-shadow:0 12px 30px #0f172a33}.counter span{font-size:.85rem;opacity:.7}.counter strong{font-size:2rem}.composer{background:#fff;border-radius:20px;padding:1.5rem;box-shadow:0 20px 40px #0f172a14;display:grid;gap:1rem}.composer-header{display:flex;align-items:center;justify-content:space-between;gap:1rem}.composer-header h2{margin:0;font-size:1.25rem;color:#111827}.composer-header h3{margin:0;font-size:1.1rem;color:#111827}.composer button{background:#2563eb;color:#fff;border:none;padding:.65rem 1.4rem;border-radius:999px;font-weight:600;transition:transform .2s ease,box-shadow .2s ease}.composer button:hover{transform:translateY(-1px);box-shadow:0 10px 20px #2563eb40}textarea{width:100%;border-radius:14px;border:1px solid #e5e7eb;padding:.9rem 1rem;font-size:1rem;font-family:inherit;color:#111827;resize:vertical;background:#f9fafb;transition:border-color .2s ease,box-shadow .2s ease}textarea:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px #2563eb33;background:#fff}.koma-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.5rem}.koma-card{background:#fff;border-radius:18px;padding:1.25rem;box-shadow:0 15px 30px #0f172a14;display:grid;gap:1rem}.koma-card-header{display:flex;align-items:flex-start;justify-content:space-between;gap:1rem}.koma-label{margin:0;font-size:.95rem;font-weight:600;color:#111827}.koma-id{margin:.35rem 0 0;font-size:.75rem;color:#6b7280;word-break:break-all}.ghost{background:transparent;border:1px solid #e5e7eb;color:#ef4444;padding:.4rem .85rem;border-radius:999px;font-size:.85rem}.ghost:hover{border-color:#fca5a5;background:#fef2f2}.page-panel{background:#fff;border-radius:20px;padding:1.5rem;box-shadow:0 20px 40px #0f172a14;display:grid;gap:1.25rem}.page-panel-header{display:flex;align-items:flex-start;justify-content:space-between;gap:1.5rem}.page-panel-header h2{margin:0;font-size:1.25rem;color:#111827}.page-controls{display:flex;align-items:center;gap:.75rem}.page-controls select,.page-detail-actions select{border-radius:999px;border:1px solid #e5e7eb;padding:.5rem .9rem;background:#f9fafb;font-family:inherit}.page-controls button{background:#2563eb;color:#fff;border:none;padding:.6rem 1.2rem;border-radius:999px;font-weight:600}.page-list{display:flex;flex-wrap:wrap;gap:.75rem}.page-pill{border:1px solid #e5e7eb;border-radius:999px;padding:.65rem 1.1rem;background:#f9fafb;display:flex;flex-direction:column;align-items:flex-start;gap:.1rem;transition:all .2s ease}.page-pill small{color:#6b7280;font-size:.75rem}.page-pill.active{background:#111827;color:#f9fafb;border-color:transparent}.page-pill.active small{color:#f9fafbb3}.page-detail{display:grid;gap:1.5rem}.page-detail-header{display:flex;align-items:flex-start;justify-content:space-between;gap:1.5rem}.page-detail-header h2{margin:0;font-size:1.3rem}.page-detail-actions{display:flex;align-items:center;gap:.75rem}.page-detail-actions label{display:flex;align-items:center;gap:.5rem;font-size:.85rem;color:#374151}.muted{margin:.35rem 0 0;color:#9ca3af;font-size:.9rem}.empty-state{background:#17171b;border-radius:20px;padding:2rem;text-align:center;color:#9ca3af;box-shadow:none;display:grid;gap:1rem;justify-items:center}.empty-state button{background:transparent;border:none;padding:0}.scene-panel{background:#17171b;border-radius:20px;padding:1.5rem;box-shadow:none;display:grid;gap:1.25rem}.scene-panel-header{display:flex;align-items:flex-start;justify-content:space-between;gap:1.5rem}.scene-panel-header h2{margin:0;font-size:1.25rem;color:#f3f4f6}.scene-controls{display:flex;align-items:center;gap:.75rem}.scene-controls input,.scene-detail-actions input{border-radius:999px;border:1px solid #2a2a2f;padding:.55rem .95rem;background:#111114;font-family:inherit;min-width:200px;color:#e5e7eb}.scene-controls button{background:#2b2b31;color:#e5e7eb;border:none;padding:.6rem 1.2rem;border-radius:999px;font-weight:600}.scene-list{display:flex;flex-wrap:wrap;gap:.75rem}.scene-pill{border:1px solid #2a2a2f;border-radius:16px;padding:.75rem 1rem;background:#131317;display:flex;flex-direction:column;align-items:flex-start;gap:.25rem;min-width:160px;transition:all .2s ease}.scene-pill small{color:#9ca3af;font-size:.75rem}.scene-pill.active{background:#2b2b31;color:#f3f4f6;border-color:transparent}.scene-pill.active small{color:#f3f4f6b3}.scene-detail{display:grid;gap:1.5rem}.scene-detail-header{display:flex;align-items:flex-start;justify-content:space-between;gap:1.5rem}.scene-detail-header h2{margin:0;font-size:1.3rem;color:#f3f4f6}.scene-detail-actions{display:flex;align-items:center;gap:.75rem}.scene-detail-actions label{display:flex;align-items:center;gap:.5rem;font-size:.85rem;color:#d1d5db}.work-panel{background:#fff;border-radius:20px;padding:1.5rem;box-shadow:0 20px 40px #0f172a14;display:grid;gap:1.25rem}.work-panel-header{display:flex;align-items:flex-start;justify-content:space-between;gap:1.5rem}.work-panel-header h2{margin:0;font-size:1.25rem;color:#111827}.work-controls{display:flex;align-items:center;gap:.75rem}.work-controls input,.work-detail-actions input{border-radius:999px;border:1px solid #e5e7eb;padding:.55rem .95rem;background:#f9fafb;font-family:inherit;min-width:220px}.work-controls button{background:#2563eb;color:#fff;border:none;padding:.6rem 1.2rem;border-radius:999px;font-weight:600}.work-list{display:flex;flex-wrap:wrap;gap:.75rem}.work-pill{border:none;border-bottom:1px solid #1f1f24;border-radius:0;padding:.55rem .75rem;background:transparent;display:flex;flex-direction:column;align-items:flex-start;gap:.2rem;width:100%;height:44px;justify-content:center;text-align:left;color:#e5e7eb;transition:all .2s ease}.work-pill small{color:#9ca3af;font-size:.75rem}.work-pill:hover{background:#1a1a20}.work-pill.active{background:#20202a;color:#f9fafb}.work-pill.active small{color:#f9fafbb3}.work-detail{display:grid;gap:1.5rem}.work-detail-header{display:flex;align-items:flex-start;justify-content:space-between;gap:1.5rem}.work-detail-header h2{margin:0;font-size:1.3rem}.work-detail-actions{display:flex;align-items:center;gap:.75rem}.work-detail-actions label{display:flex;align-items:center;gap:.5rem;font-size:.85rem;color:#374151}.sidebar{background:#0f0f12;border-radius:0;padding:1rem;box-shadow:none;display:grid;grid-template-rows:auto minmax(0,1fr);gap:1rem;position:sticky;top:0;height:100vh;border-right:1px solid #1f1f24}.sidebar.open{width:280px}.sidebar.closed{width:56px;padding:1rem .5rem}.sidebar.closed .sidebar-header{justify-content:center}.sidebar.closed .sidebar-title{opacity:0;width:0;height:0;overflow:hidden}.sidebar-header{display:flex;align-items:center;justify-content:space-between;gap:.75rem}.sidebar-title{font-weight:600;color:#f3f4f6;font-size:.95rem}.sidebar-toggle{border:1px solid #2a2a2f;background:#111114;border-radius:8px;padding:.3rem .45rem;font-size:.85rem;color:#e5e7eb}.sidebar-content{display:flex;flex-direction:column;gap:1rem;min-height:0;justify-content:flex-start}.sidebar-controls{display:flex;align-items:center;gap:.4rem;padding:0}.sidebar-controls input{border-radius:10px;border:1px solid #2a2a2f;padding:.55rem .75rem;background:#111114;font-family:inherit;color:#e5e7eb}.sidebar-controls button{background:transparent;border:none;padding:0}.sidebar-list{display:flex;flex-direction:column;gap:0;overflow-y:auto;padding:0;margin:0;flex:1}.tree-panel{background:transparent;border-radius:20px;padding:1.5rem;box-shadow:none;display:grid;gap:1.5rem}.tree-panel-header{display:flex;align-items:flex-start;justify-content:space-between;gap:1.5rem}.tree-panel-header .tree-node-header{width:100%;justify-content:space-between}.tree-panel-header .tree-toggle{flex:1}.tree-panel-header .tree-title-button,.tree-panel-header .tree-title-input{font-size:26px}.tree-panel-header .tree-danger{margin-left:auto}.tree-header-utility{margin-left:auto;display:flex;align-items:center;gap:.5rem}.tree-header-utility .tree-danger{margin-left:0}.tree-action-button{border:1px solid #2a2a2f;background:#111114;color:#e5e7eb;padding:.35rem .7rem;border-radius:8px;font-size:.85rem;font-weight:600;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease,background .2s ease}.tree-action-button:hover{background:#1a1a20;transform:translateY(-1px);box-shadow:0 8px 16px #0f172a26}.tree-panel-header h2{margin:0;font-size:1.3rem;color:#f3f4f6}.tree-header-actions{display:flex;align-items:center;gap:.75rem}.tree-header-actions label{display:flex;align-items:center;gap:.5rem;font-size:.85rem;color:#d1d5db}.tree-header-actions input{border-radius:999px;border:1px solid #2a2a2f;padding:.55rem .95rem;background:#111114;font-family:inherit;min-width:220px;color:#e5e7eb}.tree-toolbar{display:flex;flex-wrap:wrap;gap:.75rem;align-items:center}.tree-toolbar input,.tree-toolbar select{border-radius:12px;border:1px solid #2a2a2f;padding:.5rem .8rem;background:#111114;font-family:inherit;color:#e5e7eb}.tree-toolbar button{background:transparent;border:none;padding:0}.tree{list-style:none;padding-left:0;margin:0;display:grid;gap:.6rem}.tree .tree{margin-top:.6rem}.tree-node{display:grid;gap:.5rem}.scene-node,.page-node,.koma-node{border-radius:16px;padding:.75rem;box-shadow:0 8px 18px #0f172a0f}.scene-node{background:#1c1c21}.page-node{background:#18181d}.koma-node{background:#15151a}.tree-toggle{border:none;background:transparent;border-radius:12px;padding:.25rem .1rem;display:grid;grid-template-columns:auto 1fr;align-items:center;gap:.65rem;text-align:left;transition:background .2s ease,border-color .2s ease}.tree-caret-button{border:none;background:transparent;padding:.35rem .4rem;min-width:32px;min-height:32px;border-radius:8px;display:inline-flex;align-items:center;justify-content:center;color:inherit;cursor:pointer}.tree-title-button{border:none;background:transparent;padding:.1rem 0;font-size:.95rem;font-weight:600;color:#f3f4f6;text-align:left;cursor:text}.tree-title-multiline{white-space:pre-wrap;line-height:1.4}.tree-title-input{border:1px solid #2a2a2f;border-radius:10px;padding:.35rem .5rem;font-size:.95rem;font-weight:600;font-family:inherit;resize:none;background:#111114;color:#f3f4f6}.tree-node-header{display:flex;align-items:center;gap:.75rem}.tree-node-header .tree-toggle{flex:1}.tree-danger{width:20px;height:20px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;border:1px solid #ef4444;background:transparent;color:#ef4444;font-size:.8rem;cursor:pointer;white-space:nowrap}.icon-button{width:32px;height:32px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;background:#2a2a2f;color:#e5e7eb;font-size:1rem;font-weight:700;border:none;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease}.icon-button:hover,.tree-danger:hover{transform:translateY(-1px);box-shadow:0 8px 16px #0f172a26}.icon-button:focus-visible,.tree-danger:focus-visible{outline:3px solid rgba(148,163,184,.5);outline-offset:2px}.icon-button-danger{width:20px;height:20px;border-radius:999px;border:1px solid #ef4444;background:transparent;color:#ef4444;font-size:.8rem}.tree-toggle[draggable=true]{cursor:grab}.tree-toggle[draggable=true]:active{cursor:grabbing}.tree-toggle:hover{background:#ffffff0a}.tree-caret{font-size:1rem;color:#e5e7eb}.tree-title{font-weight:600;color:#f3f4f6}.tree-title-row{display:inline-flex;align-items:center;gap:.6rem;min-width:0}.tree-subtitle{color:#9ca3af;font-size:.85rem}.tree-children{display:grid;gap:.75rem;padding-left:1.1rem}.tree-actions{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}.tree-actions input,.tree-actions select{border-radius:12px;border:1px solid #2a2a2f;padding:.45rem .75rem;background:#111114;font-family:inherit;color:#e5e7eb}.tree-form label{display:grid;gap:.4rem;font-size:.85rem;color:#d1d5db}.tree-form input{border-radius:12px;border:1px solid #2a2a2f;padding:.5rem .8rem;background:#111114;font-family:inherit;color:#e5e7eb}.tree-detail{margin:0;color:#9ca3af;font-size:.9rem}.koma-content{margin:0;padding:.75rem 1rem;background:#121216;border-radius:12px;border:1px solid #2a2a2f;white-space:pre-wrap;color:#e5e7eb;font-size:.95rem}.koma-editor{width:100%;border-radius:12px;border:1px solid #2a2a2f;padding:.75rem 1rem;font-size:.95rem;font-family:inherit;color:#e5e7eb;resize:vertical;background:#111114}
